(this.webpackJsonpprojeto2=this.webpackJsonpprojeto2||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},60:function(t,e,n){},66:function(t,e,n){"use strict";n.r(e);var r=n(1),s=n.n(r),c=n(26),a=n.n(c),o=(n(38),n(29)),i=n(2),u=(n(39),n(8)),j=n.n(u),h=n(9),l=n(27),p=n(28),b=n(33),d=n(32),f=n(0),O=function(t){Object(b.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={posts:[],loading:!0,searchString:""},t.handleSubmit=function(e){e.preventDefault(),console.log(t.state.searchString),t.fetchPosts(t.state.searchString)},t}return Object(p.a)(n,[{key:"fetchPosts",value:function(){var t=Object(h.a)(j.a.mark((function t(e){var n,r,s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(sessionStorage.getItem("token")),r=n.token,(s=new Headers).append("token",r),s.append("searchString",e),t.next=7,fetch("https://projeto3-leorr.herokuapp.com/posts/search",{method:"GET",headers:s}).then((function(t){return t.json()})).then((function(t){return t}));case 7:(c=t.sent)&&(!1,this.setState({loading:false}),this.setState({posts:c}));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){}},{key:"logout",value:function(){window.onunload=function(){sessionStorage.removeItem("token")}}},{key:"updateSearch",value:function(t){var e=t;this.setState({searchString:e})}},{key:"render",value:function(){var t=this,e=this.state.posts;return this.state.loading?Object(f.jsxs)("div",{className:"dashboard-wrapper",children:[Object(f.jsx)("h2",{children:"Dashboard"}),Object(f.jsx)("h1",{children:"Posts"}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("label",{children:"Busca: "}),Object(f.jsx)("input",{initialValue:"",onInput:function(e){return t.updateSearch(e.target.value)}}),Object(f.jsx)("button",{onClick:this.handleSubmit,children:"Busca"})]}),Object(f.jsx)("form",{onSubmit:this.logout,children:Object(f.jsx)("button",{type:"submit",children:"Logout"})})]}):Object(f.jsxs)("div",{className:"dashboard-wrapper",children:[Object(f.jsx)("h2",{children:"Dashboard"}),Object(f.jsx)("h1",{children:"Posts"}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("label",{children:"Busca: "}),Object(f.jsx)("input",{initialValue:"",onInput:function(e){return t.updateSearch(e.target.value)}}),Object(f.jsx)("button",{onClick:this.handleSubmit,children:"Busca"})]}),e.map((function(t){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:t.title}),Object(f.jsx)("p",{children:t.content})]})})),Object(f.jsx)("form",{onSubmit:this.logout,children:Object(f.jsx)("button",{type:"submit",children:"Logout"})})]})}}]),n}(s.a.Component),x=n(12),m=n(15),v=n.n(m);n(60);function g(t){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v.a.post("https://projeto3-leorr.herokuapp.com/user/login",e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return w.apply(this,arguments)}function w(){return(w=Object(h.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v.a.post("https://projeto3-leorr.herokuapp.com/user/signup",e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){var e=t.setToken,n=Object(r.useState)(),s=Object(x.a)(n,2),c=s[0],a=s[1],o=Object(r.useState)(),i=Object(x.a)(o,2),u=i[0],l=i[1],p=function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,g({username:c,password:u});case 3:r=t.sent,e(r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(h.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,k({username:c,password:u});case 3:r=t.sent,e(r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"login-wrapper",children:[Object(f.jsx)("h1",{children:"Informa\xe7\xf5es de login"}),Object(f.jsxs)("form",{onSubmit:p,children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("p",{children:"Username"}),Object(f.jsx)("input",{type:"text",onChange:function(t){return a(t.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("p",{children:"Password"}),Object(f.jsx)("input",{type:"password",onChange:function(t){return l(t.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Submit"})})]}),Object(f.jsx)("h1",{children:"Informa\xe7\xf5es de registro"}),Object(f.jsxs)("form",{onSubmit:b,children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("p",{children:"Username"}),Object(f.jsx)("input",{type:"text",onChange:function(t){return a(t.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("p",{children:"Password"}),Object(f.jsx)("input",{type:"password",onChange:function(t){return l(t.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Submit"})})]})]})}var C=function(){var t=function(){var t=Object(r.useState)(function(){var t=sessionStorage.getItem("token"),e=JSON.parse(t);return null===e||void 0===e?void 0:e.token}()),e=Object(x.a)(t,2),n=e[0],s=e[1];return{setToken:function(t){sessionStorage.setItem("token",JSON.stringify(t)),s(t.token)},token:n}}(),e=t.token,n=t.setToken;return e?Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)("h1",{children:"Login com sucesso"}),Object(f.jsx)(o.a,{children:Object(f.jsx)(i.c,{children:Object(f.jsx)(i.a,{path:["/projeto2/dashboard","/projeto2"],children:Object(f.jsx)(O,{})})})})]}):Object(f.jsx)(y,{setToken:n})},I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(e){var n=e.getCLS,r=e.getFID,s=e.getFCP,c=e.getLCP,a=e.getTTFB;n(t),r(t),s(t),c(t),a(t)}))};a.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root")),I()}},[[66,1,2]]]);
//# sourceMappingURL=main.e6ea9c73.chunk.js.map